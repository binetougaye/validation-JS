<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- <link rel="stylesheet" href="style.css"> -->
    <title>Input</title>
</head>
<body>
 <div class="container mt-4">
    <input type="email" class="form-control" id="Input1" 
    placeholder="">
    <div id="Add" class="btn btn-primary mt-3 boutton">Ajouter</div>
    <ul id="taskList" class="list-group mt-3">
    </ul>
      </div>
      <p id="added"></p>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Pr√©nom</th>
              <th>Actions</th>

            </tr>
          </thead>
          <tbody id="table-body">
                    </tbody>
        </table>
        
    <script  type="module">

  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-app.js";
  import { getFirestore,collection,addDoc,getDocs } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-firestore.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBe8FQgAzFTfV3Ns6wS3YMPRfR32zGoWZY",
    authDomain: "fir-project-43850.firebaseapp.com",
    projectId: "fir-project-43850",
    storageBucket: "fir-project-43850.appspot.com",
    messagingSenderId: "399146580323",
    appId: "1:399146580323:web:db77a3f5c8ba096aa2bb56",
    measurementId: "G-SL4SJ24HLS"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
//   const analytics = getAnalytics(app);
const db = getFirestore(app);
// try {
//   const docRef = await addDoc(collection(db, "users"), {
//     prenom:"Mada",
// });

//   console.log("Document written with ID: ", docRef.id);
// } catch (e) {
//   console.error("Error adding document: ", e);
// }


let button = document.getElementById('Add')
button.addEventListener('click',function(){
    addDoc(collection(db,"users"),{
        prenom: document.getElementById('Input1').value
    })
})
const querySnapshot = await getDocs(collection(db, "users"));
let recup=[];
querySnapshot.forEach((doc) => {
    recup.push(doc.data())
//   console.log(`${doc.id} => ${doc.data()}`);
// table.value="";
});
for (let i = 0; i < recup.length; i++) {
    
const table = document.getElementById('table-body')

    table.innerHTML+=` <tr> <td>${recup[i].prenom}
</td>
        </tr>
    
    
    `
}
const ajout = document.getElementById("Input1");
const btn = document.getElementById("Add");
const table = document.getElementById('table-body');
btn.addEventListener('click', () => {
    let cellule=document.createElement('td');

    // let cellule2=document.createElement('td');
    let tr=document.createElement('tr');
    table.appendChild(tr);
    tr.appendChild(cellule)
    table.appendChild(tr)
    cellule.innerText=`${ajout.value}`;
ajout.value="";

//    cellule2.innerText=ajout.value;

});


    </script>
</body>
</html>
