<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin-Dashboard</title>

    <!-- Bootstrap CSS and Icon Link -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Custom CSS Link -->
    <link rel="stylesheet" href="adminDashboard.css">
</head>

<body>
    <div class="container-fluid d-flex">
        <section id="sidebar">
            <h1>Belle <br> Gueule</h1>
            <ul>
                <a href="adminDashboard.html"><i class="bi bi-house-fill"></i>Accueil</a>
                <a href="listeUtilisateur.html"><i class="bi bi-person-fill"></i>Liste des Utilisateurs</a>
                <a href="gestionProduitAdmin.html"><i class="bi bi-bag-fill"></i>Ajout des Articles</a>
                <a href="Ajouts-de-nouvelles-catégories(CRUD).html"><i class="bi bi-tags-fill"></i>Ajout des Catégories</a>
            </ul>
            <button id="signoutbutton">Sign Out</button>
        </section>
        <section id="dashboard">
            <div class="row d-flex profile py-2">
                <img src="images/avatar.jpg" alt="avatar">
                <h6 id="userName"></h6>
            </div>
            <div class="row d-flex justify-content-around w-100 stats">
                <div class="card text-center pt-4">Nombre de Clients<br><span id="clients"></span></div>
                <div class="card text-center pt-4">Nombre d'Admin</div>
                <div class="card text-center pt-4">Nombre d'Articles</div>
            </div>
        </section>
    </div>


    <!-- Bootstrap JS link -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script type="module" src="adminDashboard.js"></script>

    <script>
        // recuperation des infos sur le sessionStorage
        let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"))
        let UserInfo = JSON.parse(sessionStorage.getItem("user-info"))

        let userName = document.getElementById("greet")
        let signoutBtn = document.getElementById("signoutbutton")

        // function pour la deconnexion et redirection vers la page de connexion
        let Signout = () => {
            sessionStorage.removeItem("user-creds")
            sessionStorage.removeItem("user-info")
            window.location.href = 'SignIn.html'
        }

        // function pour verifier les infos user dans le sessionStorage et afficher les infos sur le DOM  
        let CheckCred = () => {
            if (!sessionStorage.getItem("user-creds")) {
                window.location.href = 'SignIn.html'
            } else {
                userName.innerText = `bienvenue${UserInfo.lastname + " " + UserInfo.firstname}!`
            }
        }

        window.addEventListener('load', CheckCred);
        signoutBtn.addEventListener('click', Signout)
    </script>


</body>

</html>